@model EquipmentStore.Web.Models.MachineViewModel

@{
	ViewBag.Title = "Изменение оборудования";
	Layout = "~/Views/Shared/_Layout.cshtml";

	string imageSource = null;

	if (Model.ImageData != null)
	{
		var base64 = Convert.ToBase64String(Model.ImageData.Data);
		imageSource = $"data:{Model.ImageData.MimeType};base64,{base64}";
	}
}

<div class="panel panel-default">
	@using (Html.BeginForm("Update", "Machine", FormMethod.Post, new { enctype = "multipart/form-data" }))
	{
		<div class="panel-body">
			@Html.HiddenFor(m => m.Id)
			@Html.HiddenFor(m => m.ImageData.Id)
			@Html.HiddenFor(m => m.ImageData.Data)
			@Html.HiddenFor(m => m.ImageData.MimeType)
			@Html.HiddenFor(m => m.ImageData.Name)

			<b>
				@Html.LabelFor(m => m.Name)
			</b>
			<p>
				@Html.TextBoxFor(m => m.Name, new { @class = "form-control" })
				@Html.ValidationMessageFor(m => m.Name)
			</p>

			<b>
				@Html.LabelFor(m => m.ShortDescription)
			</b>
			<p>
				@Html.TextAreaFor(m => m.ShortDescription, 3, 1, new { @class = "form-control" })
				@Html.ValidationMessageFor(m => m.ShortDescription)
			</p>

			<b>
				@Html.LabelFor(m => m.LongDescription)
			</b>
			<p>
				@Html.TextAreaFor(m => m.LongDescription, 5, 1, new { @class = "form-control" })
				@Html.ValidationMessageFor(m => m.LongDescription)
			</p>

			@if (Model.ImageData != null)
			{
			<b>
				@Html.LabelFor(m => m.ImageData)
			</b>
			<p>
				<img src="@imageSource" class="img-responsive" />
			</p>
			}
			<b>
				@Html.LabelFor(m => m.ImageInput)
			</b>
			<p>
				@Html.TextBoxFor(m => m.ImageInput, new { type = "file", style = "width: 100%" })
				@Html.ValidationMessageFor(m => m.ImageInput)
			</p>

			<b>
				@Html.LabelFor(m => m.CuttingFrequency)
			</b>
			<p>
				@Html.TextBoxFor(m => m.CuttingFrequency, new { @class = "form-control" })
				@Html.ValidationMessageFor(m => m.CuttingFrequency)
			</p>

			<b>
				@Html.LabelFor(m => m.MaximumPackageSize)
			</b>
			<p>
				@Html.TextBoxFor(m => m.MaximumPackageSize, new { @class = "form-control" })
				@Html.ValidationMessageFor(m => m.MaximumPackageSize)
			</p>

			<b>
				@Html.LabelFor(m => m.PackageMaterial)
			</b>
			<p>
				@Html.TextBoxFor(m => m.PackageMaterial, new { @class = "form-control" })
				@Html.ValidationMessageFor(m => m.PackageMaterial)
			</p>

			<b>
				@Html.LabelFor(m => m.MaxMoldingDepth)
			</b>
			<p>
				@Html.TextBoxFor(m => m.MaxMoldingDepth, new { @class = "form-control" })
				@Html.ValidationMessageFor(m => m.MaxMoldingDepth)
			</p>

			<b>
				@Html.LabelFor(m => m.Voltage)
			</b>
			<p>
				@Html.TextBoxFor(m => m.Voltage, new { @class = "form-control" })
				@Html.ValidationMessageFor(m => m.Voltage)
			</p>

			<b>
				@Html.LabelFor(m => m.Size)
			</b>
			<p>
				@Html.TextBoxFor(m => m.Size, new { @class = "form-control" })
				@Html.ValidationMessageFor(m => m.Size)
			</p>

			<b>
				@Html.LabelFor(m => m.Weight)
			</b>
			<p>
				@Html.TextBoxFor(m => m.Weight, new { @class = "form-control", type = "nubmer", step = "50", min = "0" })
				@Html.ValidationMessageFor(m => m.Weight)
			</p>
		</div>

		<div class="panel-footer">
			<p>
				<button type="submit" class="btn btn-default">Изменить</button>
			</p>

			<p>
				@Html.ActionLink("Назад", "Index", "Admin", null, new { @class = "btn btn-default" })
			</p>
		</div>
	}
</div>
